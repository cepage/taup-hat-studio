<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Portfolio')}">
  <title>Portfolio</title>
</head>
<body>
  <header th:replace="~{fragments/layout :: header}"></header>

  <main class="site-main">
    <div class="section-header">
      <h2>Portfolio</h2>
    </div>

    <div th:if="${portfolioItems.isEmpty()}" style="text-align: center; padding: 3rem; color: var(--color-text-muted);">
      <p>No artwork available yet. Check back soon!</p>
    </div>

    <div class="thumbnail-grid">
      <div class="thumbnail-item" th:each="item, iter : ${portfolioItems}"
           th:data-index="${iter.index}"
           th:data-src="${item.optimizedUrl != null ? item.optimizedUrl : item.imageUrl}"
           th:data-title="${item.title}"
           th:data-description="${item.description}"
           onclick="openLightbox(this.dataset.index)">
        <img th:src="${item.thumbnailUrl != null ? item.thumbnailUrl : item.imageUrl}"
             th:alt="${item.title}">
        <div class="thumbnail-caption" th:text="${item.title}">Item Title</div>
      </div>
    </div>

    <!-- Lightbox overlay -->
    <div class="lightbox-overlay" id="lightbox">
      <button class="lightbox-close" onclick="closeLightbox()" aria-label="Close">&times;</button>
      <button class="lightbox-prev" onclick="lightboxPrev()" aria-label="Previous">&#8249;</button>
      <div class="lightbox-content">
        <img id="lightboxImage" src="" alt="">
        <div class="lightbox-caption" id="lightboxCaption"></div>
      </div>
      <button class="lightbox-next" onclick="lightboxNext()" aria-label="Next">&#8250;</button>
    </div>

    <!-- Portfolio data for JavaScript -->
    <script th:inline="javascript">
      /*<![CDATA[*/
      var portfolioData = /*[[${portfolioJson}]]*/ [];
      /*]]>*/
    </script>
  </main>

  <footer th:replace="~{fragments/layout :: footer}"></footer>
  <script src="/js/portfolio-lightbox.js"></script>
</body>
</html>
